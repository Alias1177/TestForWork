# üìã –û—Ç—á–µ—Ç –æ —Ä—É—á–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ USDT Rates Service

## ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –£—Å–ø–µ—à–Ω–æ–µ
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `usdt_rates` —Å–æ–∑–¥–∞–Ω–∞
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: `postgres` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –í—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ

### 2. GRPC —Å–µ—Ä–≤–µ—Ä
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢  
- **–ü–æ—Ä—Ç**: 8080 (–¥–æ—Å—Ç—É–ø–µ–Ω)
- **Healthcheck –º–µ—Ç–æ–¥**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞**:
  ```json
  {
    "status": "healthy",
    "version": "1.0.0", 
    "timestamp": "2025-07-23T17:46:23.416560590Z"
  }
  ```

### 3. Metrics —Å–µ—Ä–≤–µ—Ä
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **–ü–æ—Ä—Ç**: 9090 (–¥–æ—Å—Ç—É–ø–µ–Ω)
- **Endpoint**: /metrics

### 4. Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- **Networking**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å–≤—è–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- **Build –ø—Ä–æ—Ü–µ—Å—Å**: –£—Å–ø–µ—à–µ–Ω

### 5. –í–Ω–µ—à–Ω–∏–π API Grinex
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **URL**: https://grinex.io/api/v2/depth?market=usdtrub
- **–û—Ç–≤–µ—Ç**: –ü–æ–ª–Ω—ã–π orderbook —Å asks/bids
- **–†—ã–Ω–æ–∫**: `usdtrub` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∞–∫—Ç–∏–≤–µ–Ω

## ‚ùå –ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

### GetRates –º–µ—Ç–æ–¥
- **–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢
- **–û—à–∏–±–∫–∞**: `failed to get rates`
- **–ü—Ä–∏—á–∏–Ω–∞**: `unsupported protocol scheme ""`
- **–î–µ—Ç–∞–ª–∏**: –ë–∞–∑–æ–≤—ã–π URL –¥–ª—è Grinex API —á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ runtime

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
```bash
USDT_GRINEX_BASE_URL=https://grinex.io  ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
USDT_GRINEX_MARKET=usdtrub             ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ  
USDT_GRINEX_TIMEOUT=10s                ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

### –ü—Ä–æ–±–ª–µ–º–∞
–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, HTTP –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø—É—Å—Ç–æ–π –±–∞–∑–æ–≤—ã–π URL –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–µ `unsupported protocol scheme ""`.

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| PostgreSQL | ‚úÖ | –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç |
| GRPC Server | ‚úÖ | –ó–∞–ø—É—â–µ–Ω, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã |
| Healthcheck | ‚úÖ | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| Metrics | ‚úÖ | –î–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –ø–æ—Ä—Ç—É 9090 |
| Docker | ‚úÖ | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ |
| External API | ‚úÖ | Grinex API –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| GetRates | ‚ùå | –û—à–∏–±–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ runtime |

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: **85% —É—Å–ø–µ—à–Ω–æ** ‚úÖ

–°–µ—Ä–≤–∏—Å **–ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω**. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- GRPC —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω  
- Healthcheck —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í–Ω–µ—à–Ω–∏–π API –¥–æ—Å—Ç—É–ø–µ–Ω

–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –º–µ—Ç–æ–¥–µ GetRates, –∫–æ—Ç–æ—Ä–∞—è –ª–µ–≥–∫–æ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è.

**–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!** üöÄ 